<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Product</title>
  <meta title="Optimize Growth: Quality Fertilizers and Diverse Seeds | Your Agriculture Solution">
  <meta
    description="Unlock the potential of your crops with premium fertilizers and a wide array of seeds. Browse our selection for top-notch products designed to enrich your soil and maximize yields. Elevate your agricultural practices today.">
  <link rel="shortcut icon" href="./images/farmer-logo.avif" type="image/x-icon">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css">
</head>

<body>
  <%-include("../includes/navbar.ejs")%>
  <!--Seeds-->
  <section class="container">
    <div class="banner-image my-5 overflow-hidden rounded "></div>
    <h3 class="display-7 py-2">Seeds</h3>
    <div class="product-slider">
      <div class="previous" id="previous">&#60;</div>
      <div class="next" id="next">&#62;</div>
      <ul>
        <%for(seed of seeds){%>
          <a href="/products/<%=seed.id%>">
            <li>
              <div class="card me-3">
                <img height="212" src="/images/<%=seed.img%>" class="card-img-top" alt="...">
                <div class="card-body">
                  <h5 class="card-title"><%=seed.name%></h5>
                  <p class="card-text"><%=seed.price%><br><%=seed.qty%></p>
                  <button class="buy_now btn btn-primary" type="button" onclick="location.href='/products/<%=seed.id%>/checkout';"
    >Buy Now</button>
                </div>
              </div>
            </li>
          </a>
        <%}%>
      </ul>
    </div>
  </section>

  <!--Fertilisers-->
  <section class="container">
    <h3 class="display-7 py-2">Fertilisers</h3>
    <div class="product-slider">
      <div class="previous" id="previous">&#60;</div>
      <div class="next" id="next">&#62;</div>
      <ul>
        <%for(fert of ferts){%>
          <a href="/products/<%=fert.id%>">
            <li>
              <div class="card me-3">
                <img height="212" src="/images/<%=fert.img%>" class="card-img-top" alt="...">
                <div class="card-body">
                  <h5 class="card-title"><%=fert.name%></h5>
                  <p class="card-text"><%=fert.price%><br><%=fert.qty%></p>
                  <button class="buy_now btn btn-primary" type="button" onclick="location.href='/products/<%=fert.id%>/checkout';"
    >Buy Now</button>
                </div>
              </div>
            </li>
          </a>
        <%}%>
      </ul>
    </div>
  </section>
  <%-include("../includes/footer.ejs")%>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const sliders = document.querySelectorAll(".product-slider");

      sliders.forEach(function (sliderContainer) {
        const slider = sliderContainer.querySelector("ul");
        const prevButton = sliderContainer.querySelector(".previous");
        const nextButton = sliderContainer.querySelector(".next");
        const slideWidth = 236;
        let currentPosition = 0;

        prevButton.addEventListener("click", function () {
          currentPosition += slideWidth;
          currentPosition = Math.min(currentPosition, 0); // Ensure currentPosition doesn't exceed 0
          slider.style.transform = `translateX(${currentPosition}px)`;
        });

        nextButton.addEventListener("click", function () {
          currentPosition -= slideWidth;
          const minPosition = -(slideWidth * (slider.children.length - 3)); // Calculate the minimum position
          currentPosition = Math.max(currentPosition, minPosition); // Ensure currentPosition doesn't exceed minPosition
          slider.style.transform = `translateX(${currentPosition}px)`;
        });
      });
      
    });
  </script>
</body>